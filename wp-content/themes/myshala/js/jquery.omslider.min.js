/*
 * jQuery omSlider Plugin
 * Copyright (c) 2012 Strelkey
 * Version: 1.2.1
 */
(function(d){function j(f,b,a,e){d(b).stop(!0,!0);a.resize&&f.stop(!0,!0);e=a.currSlide+e;e>b.length-1?e=0:0>e&&(e=b.length-1);k(f,b,a,e)}function k(f,b,a,e){if(e!=a.currSlide){l(a.pager,e);d(b).stop(!0,!0);a.resize&&f.stop(!0,!0);var c=a.currSlide;a.currSlide=e;d(b[c]).css("z-index","1").removeClass("active");a.fadePrev&&d(b[c]).fadeTo(a.speed,0);d(b[e]).fadeTo(0,0).css({position:"absolute",top:0,left:0,right:0,zIndex:2}).addClass("active").fadeTo(a.speed,1,function(){d(b[c]).hide();d(this).css({position:"static"})}); a.resize&&(e=d(b[e]).outerHeight(),f.css("height",f.height()+"px").animate({height:e+"px"},a.speed,function(){d(this).css("height","auto")}))}}function l(f,b){d(f).each(function(){d(this).children().removeClass("active").eq(b).addClass("active")})}d.fn.omSlider=function(f){return this.each(function(){f=f||{};var b=d(this),a=b.children(),e=a.get();if(!(2>e.length)){var c=d.extend({},d.fn.omSlider.defaults,f);"absolute"==b.css("position")?!0:b.css("position","relative");b.css("overflow","hidden");a.filter(":eq("+ c.active+")").length?(a.filter(":eq("+c.active+")").addClass("active").show(),a.filter(":not(:eq("+c.active+"))").hide(),c.currSlide=c.active):(a.filter(":first").addClass("active").show(),a.filter(":gt(0)").hide(),c.currSlide=0);c.prev&&d(c.prev).bind("click",function(a){a.preventDefault();j(b,e,c,-1)});c.next&&d(c.next).bind("click",function(a){a.preventDefault();j(b,e,c,1)});if(c.pager){a=d(c.pager);a.empty();for(var h,i=0;i<e.length;i++)h=d.isFunction(c.pagerAnchorBuilder)?c.pagerAnchorBuilder(i): '<a href="#">'+(i+1)+"</a>",h=d(h),h.data("index",i),h.click(function(a){a.preventDefault();k(b,e,c,d(this).data("index"))}).appendTo(a);l(c.pager,c.currSlide)}var g=-1;b.bind("touchstart",function(a){g=(a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]).pageX});b.bind("touchmove",function(a){if(g>=0){a.preventDefault();a=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0];if(a.pageX-g>30){j(b,e,c,-1);g=-1}else if(a.pageX-g<-30){j(b,e,c,1);g=-1}}});d(document).bind("touchend", function(){g=-1})}})};d.fn.omSlider.defaults={speed:1E3,next:null,prev:null,pager:null,pagerAnchorBuilder:null,resize:!0,fadePrev:!1,active:0}})(jQuery);