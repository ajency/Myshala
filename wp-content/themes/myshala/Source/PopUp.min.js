/*
 *	PopUp.min.js
 *
 *	Speedo PopUp v1.1.2
 *
 *	Speedo PopUp is a lightweight jQuery plugin
 *	with powerful customization settings.
 *
 *	http://www.speedoproducts.com
 *	http://www.artflow.ro
 *	http://www.agapastudio.com
 *
 *	Copyright (c) 2012-2013 By Artflow & Agapastudio.All rights reserved.
 *
 *	License:
 *		http://www.speedoproducts.com/speedo-popup/license.php
 */
(function(d){function I(a){function m(h,c,e,f,F){if(c&&"none"!=c&&(!v||9<v)){var n=function(){d.isFunction(F)&&F();b.unbind("animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd",n)};b.bind("animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd",n);e?(b.show(),j&&j.show(),d("body").addClass("speedo-effect-"+c.toLowerCase()+"-active"),b.removeClass("speedo-effect-"+c.toLowerCase()+"-reverse"),b.addClass("speedo-effect-"+c.toLowerCase()+"-normal")):(d("body").removeClass("speedo-effect-"+
c.toLowerCase()+"-active"),b.addClass("speedo-effect-"+c.toLowerCase()+"-reverse"),b.removeClass("speedo-effect-"+c.toLowerCase()+"-normal"),j&&!f&&j.hide());b.css({"-webkit-animation-play-state":"running","-moz-animation-play-state":"running","-o-animation-play-state":"running","-ms-animation-play-state":"running","animation-play-state":"running"});return!0}return h&&"none"!=h?(d.isFunction(h)?a.overlay?h(b.get(0),j.get(0)):h(b.get(0)):d.isArray(h)?g.animatePopup(h[0],h[1],e,F):g.animatePopup(h,
"slow",e,F),!0):!1}function n(b){b=b?b:a.href;w=!1;if((null==b||""==b)&&a.htmlContent)return"html";if(b.match(I))return"image";var c="";d.each(J,d.proxy(function(d,e){if(b.split("?")[0].match(e.regex)){if(e.token){"vimeo"==d&&"video"==b.split("/")[3]&&(e.index=4);var g=b.split(e.token)[e.index].split("?")[0].split("&")[0];b=e.url.replace("{id}",g)}a.width=a.width?a.width:640;a.height=a.height?a.height:360;a.href=b;w=!0;c=e.iframe?"iframe":"flash"}},this));if(""==c){a.useFrame||0<=b.indexOf("http")?
(c="iframe",w=!0,a.href=b):c="ajax";var e=b.indexOf("#");-1!=e&&(e=b.substr(e),e=d(e),0<e.length&&(c="html",a.htmlContent=e.html()))}return c}function k(a){27==(a.keyCode||a.charCode||a.which)&&g.hidePopup()}function K(a){var c=b.position();a={startX:a.clientX,startY:a.clientY,offset:c};d(window).bind("mousemove",a,D).bind("mouseup",G)}function D(a){var c=a.data.offset;b.css({left:a.clientX-a.data.startX+c.left,top:a.clientY-a.data.startY+c.top})}function G(){d(window).unbind("mousemove",D).unbind("mouseup",
G)}var g=this,r=0,t=0,l=0,p=0,x=a.groupIndex,y=0,b=null,z=null,u=null,q=null,H=null,j=null,s=null,A=null,B=null,E=null,C=null,w=!1,I=/\.(jpg|jpeg|gif|png|bmp|tiff)(.*)?$/i,J={swf:{regex:/[^\.]\.(swf)\s*$/i},youtube:{regex:/youtube\.com\/watch/i,url:"http://www.youtube.com/embed/{id}?autoplay=1&amp;fs=1&amp;rel=0",token:"=",iframe:1,index:1},google:{regex:/google\.com\/videoplay/i,url:"http://video.google.com/googleplayer.swf?autoplay=1&amp;hl=en&amp;docId={id}",token:"=",index:1},vimeo:{regex:/vimeo\.com/i,
url:"http://player.vimeo.com/video/{id}?hd=1&amp;autoplay=1&amp;show_title=1&amp;show_byline=1&amp;show_portrait=0&amp;color=&amp;fullscreen=1",token:"/",iframe:1,index:3},metacafe:{regex:/metacafe\.com\/watch/i,url:"http://www.metacafe.com/fplayer/{id}/.swf?playerVars=autoPlay=yes",token:"/",index:4},dailymotion:{regex:/dailymotion\.com\/video/i,url:"http://www.dailymotion.com/swf/video/{id}?additionalInfos=0&amp;autoStart=1",token:"/",index:4},wordpress:{regex:/v.wordpress.com/i,url:"http://s0.videopress.com/player.swf?guid={id}&amp;v=1.01",
token:"/",index:3}};this.instanceName="instance_"+5233*Math.random();this.createPopup=function(){a.theme=a.theme.toLowerCase();var h=a.theme&&"default"!=a.theme?" speedo-theme-"+a.theme:"";d("body").addClass("speedo-popup-ready");b=d(document.createElement("div"));b.addClass("speedo-container"+h);a.css3Effects&&"none"!=a.css3Effects&&b.addClass("speedo-effect-"+a.css3Effects.toLowerCase());b.css({display:"none",width:a.width?a.width:"auto",height:a.height?a.height:"auto","min-width":150,"min-height":150,
left:"center"==a.left?"50%":a.left,top:"center"==a.top?"50%":a.top});b.appendTo("body");a.draggable&&(H=d(document.createElement("div")),H.addClass("speedo-popup-drag-area"),H.bind("mousedown",K),b.append(H));if(a.caption&&""!=a.caption){var c=d(document.createElement("p"));c.addClass("speedo-popup-caption");c.html(a.caption);b.append(c)}u=d(document.createElement("div"));u.addClass("speedo-popup-loading");b.append(u);q=d(document.createElement("div"));q.addClass("speedo-content-holder");q.appendTo(b);
var e;c=a.buttons;if(d.isArray(c)&&0<c.length){var f=["html","action"],m=d(document.createElement("div"));m.addClass("speedo-popup-custom-buttons");for(var k=0;k<c.length;k++){var l=d(document.createElement("a"));l.attr("href","javascript: void(0);");c[k].html&&l.html(c[k].html);for(e in c[k])-1==f.indexOf(e)&&l.attr(e,c[k][e]);d.isFunction(c[k].action)&&l.click(c[k].action);m.append(l)}e=m}else e=!1;!1!==e&&b.append(e);e=n();g.setContent("html"!=e?a.href:a.htmlContent,e);a.groupGallery&&1<a.groupGallery.length&&
(s=d(document.createElement("a")),s.attr("href","javascript: void(0);"),s.attr("title","Play/Pause"),s.addClass("speedo-popup-playpause-button play"),s.click(function(){g.playContent()}),b.append(s),B=d(document.createElement("a")),B.attr("href","javascript: void(0);"),B.attr("title","Previous"),B.addClass("speedo-popup-previous-button"),B.click(function(){g.prevContent()}),b.append(B),A=d(document.createElement("a")),A.attr("href","javascript: void(0);"),A.attr("title","Next"),A.addClass("speedo-popup-next-button"),
A.click(function(){g.nextContent()}),b.append(A),E=d(document.createElement("p")),E.addClass("speedo-popup-group-caption"),b.append(E),d(window).bind("mousewheel DOMMouseScroll onmousewheel",function(a){a=a.originalEvent;a=a.wheelDelta||a.detail;0<a?g.nextContent():0>a&&g.prevContent()}),C=d(document.createElement("p")),C.addClass("speedo-popup-group-count"),C.text(x+1+"/"+a.groupGallery.length),b.append(C));a.close&&(z=d(document.createElement("a")),z.addClass("speedo-ui-close"),z.attr("href","javascript: void(0);"),
z.click(function(b){a.onClose(b);g.hidePopup();g.playContent(!1)}),z.html(a.closeCaption),b.append(z));a.overlay&&(j=d(document.createElement("div")),j.addClass("speedo-overlay"+h),j.appendTo("body"),"object"==typeof a.overlay&&d.extend({opacity:0.7,zindex:1E4},a.overlay),a.overlayClose&&j.click(function(b){a.onClose(b);g.hidePopup();g.playContent(!1)}));a.onBeforeShow(b.get(0));g.centerPopup();d(window).resize(function(){g.centerPopup()});g.showPopup();a.groupAutoPlay&&g.playContent(!0);setTimeout(function(){g.centerPopup()},
100)};this.init=function(){a.esc&&d(document).bind("keydown",k)};this.showPopup=function(){if(w){var h=n();g.setContent(a.href,h)}if(void 0!=d.speedoPopup.smartSkins[a.theme])d.speedoPopup.smartSkins[a.theme](j,b);m(a.effectIn,a.css3Effects,!0)||(b.show(),j&&j.show());g.centerPopup();a.onShow(b.get(0));a.autoClose&&setTimeout(function(){g.hidePopup()},a.autoClose)};this.hidePopup=function(){m(a.effectOut,a.css3Effects,!1,!1,function(){w&&q.html(" ");j&&j.hide();b.hide();a.unload&&(j&&j.remove(),b.remove())})||
(b.hide(),j&&j.hide(),w&&q.html(" "),a.unload&&(j&&j.remove(),b.remove()));a.onHide(b.get(0))};this.centerPopup=function(){0>=l&&(l=b.width(),p=b.height(),150<l&&b.css({"max-width":l,"max-height":p}));if(a.responsive){var h=d(window).width(),c=d(window).height(),e=b.outerWidth(),f=b.outerHeight(),g=parseInt(b.css("padding-left"))+parseInt(b.css("padding-right")),j=parseInt(b.css("padding-top"))+parseInt(b.css("padding-bottom"));if(h<l+g+r||c<p+j+t){var g=parseInt(b.css("margin-left"))+parseInt(b.css("margin-right")),
j=parseInt(b.css("margin-top"))+parseInt(b.css("margin-bottom")),k=b.width(),n=b.height();b.css({width:h-(e+g-k),height:c-(f+j-n)})}}r="center"==a.left?Math.floor(d(window).width()/2)-b.outerWidth()/2:a.left;t="center"==a.top?Math.floor(d(window).height()/2)-b.outerHeight()/2:a.top;b.css({left:r,top:t})};this.animatePopup=function(a,c,e,f){f=d.isFunction(f)?f:function(){};e&&(b.hide(),j&&j.hide());switch(a){case "slideLeft":e?(b.css("left",-l),b.stop().animate({left:r,opacity:"toggle"},c,f)):b.stop().animate({left:-l,
opacity:"toggle"},c,f);break;case "slideRight":e?(b.css("left",d(window).width()+l),b.stop().animate({left:r,opacity:"toggle"},c,f)):b.stop().animate({left:d(window).width()+l,opacity:"toggle"},c,f);break;case "slideTop":e?(b.css("top",-p),b.stop().animate({top:t,opacity:"toggle"},c,f)):b.stop().animate({top:-p,opacity:"toggle"},c,f);break;case "slideBottom":e?(b.css("top",d(window).height()+p),b.stop().animate({top:t,opacity:"toggle"},c,f)):b.stop().animate({top:d(window).height()+p,opacity:"toggle"},
c,f);break;case "slideZoom":e?(b.css("top",-p),b.css("left",r+l/2),b.stop().animate({width:"toggle",left:r,top:t,opacity:"toggle"},c,f)):b.stop().animate({top:-p,left:r+l/2,width:"toggle",opacity:"toggle"},c,f);break;case "growBox":b.stop().animate({width:"toggle",height:"toggle"},f);break;case "incerto":e?(b.css("left",r+l/2),b.stop().animate({width:"toggle",left:r},c,f),b.css("top",t+p/2),b.animate({top:t},c,f)):(b.stop().animate({top:t+p/2},c,f),b.animate({width:"toggle",left:r+l/2},c,f));break;
default:a=e?"fadeIn":"fadeOut",b.stop(),b[a](c,f)}j&&j.stop().animate({opacity:"toggle"},c,function(){null!=v&&8>=v&&j.get(0).style.removeAttribute("filter",!1)})};this.playContent=function(b){if(a.groupGallery&&0<a.groupGallery.length)if(!0==b||!1!=b&&s.hasClass("play"))s.removeClass("play").addClass("pause"),y=setTimeout(function(){g.autoChangeContent(!0)},a.groupWait);else if(s.hasClass("pause")||!1==b)g.autoChangeContent(!1),s.removeClass("pause").addClass("play")};this.autoChangeContent=function(b){if(b){var c=
function(){!g.nextContent(function(){clearTimeout(y);y=setTimeout(c,a.groupWait)})&&a.loop&&(x=-1,g.nextContent(),clearTimeout(y),y=setTimeout(c,a.groupWait))};c()}else clearTimeout(y)};this.prevContent=function(b){if(a.groupGallery&&1<=a.groupGallery.length){var c=x-1;if(0<=c&&c<a.groupGallery.length){var e=a.groupGallery[c].url,f=a.groupGallery[c].title,e=e?e:"",f=f?f:"";m(a.effectIn,a.css3Effects,!1,!0,function(){g.setContent(e);E.text(f);C.text(c+1+"/"+a.groupGallery.length);x=c;m(a.effectIn,
a.css3Effects,!0,!0);d.isFunction(b)&&b()});return!0}}return!1};this.nextContent=function(b){var c=x+1;if(a.groupGallery&&a.groupGallery.length>c&&0<=c){var e=a.groupGallery[c].url,f=a.groupGallery[c].title,e=e?e:"",f=f?f:"";m(a.effectIn,a.css3Effects,!1,!0,function(){g.setContent(e);E.text(f);C.text(c+1+"/"+a.groupGallery.length);x=c;m(a.effectIn,a.css3Effects,!0,!0);d.isFunction(b)&&b()});return!0}return!1};this.setContent=function(h,c,e){var f=c?c:n(h);e=e?e:function(){};q.html("");b.css({"max-width":"",
"max-height":""});if("html"==f)q.html(h),a.onComplete(b.get(0),f),e(b.get(0),f),u.hide(),g.centerPopup();else if("image"==f)c=new Image,c.src=h,d(c).load(function(){a.onComplete(b.get(0),f);e(b.get(0),f);u.hide();b.css({"max-width":d(this).width(),"max-height":d(this).height()});g.centerPopup()}),q.append(c);else if("ajax"==f)d.ajax({type:h.type,data:h.data,url:h.url,beforeSend:function(){},success:function(c){q.html(c);a.onComplete(b.get(0),f);e(b.get(0),f);u.hide();g.centerPopup()}});else if("iframe"==
f)h=d(document.createElement("iframe")),h.attr("border",0),h.attr("frameBorder",0),h.attr("marginwidth",0),h.attr("marginheight",0),h.css({width:a.width,height:a.height}),h.get(0).src=a.href,h.load(function(){a.onComplete(b.get(0),f);e(b.get(0),f);u.hide();b.css({"max-width":d(this).width(),"max-height":d(this).height()});g.centerPopup()}),q.append(h);else if("flash"==f){var j;c=a.width;var k=a.height,m=a.flashvars,m=m||""==m?"autostart=1&autoplay=1&fullscreenbutton=1":m,l;l='<object width="'+c+'" height="'+
k+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">'+('<param name="movie" value="'+h+'" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="wmode" value="transparent" /><param name="autostart" value="true" /><param name="autoplay" value="true" /><param name="flashvars" value="'+m+'" /><param name="width" value="'+c+'" /><param name="height" value="'+k+'" />');l+='<embed src="'+h+'" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" autostart="true" autoplay="true" flashvars="'+
m+'" wmode="transparent" width="'+c+'" height="'+k+'" style="margin: 0; padding: 0" />';l+="</object>";j=d(l);q.append(j);setTimeout(function(){a.onComplete(b.get(0),f);e(b.get(0),f);b.css({"max-width":"auto"!=a.width?a.width:j.width(),"max-height":"auto"!=a.height?a.height:j.height()});g.centerPopup();u.hide()},80)}else q.html(h),a.onComplete(b.get(0),f),e(b.get(0),f),g.centerPopup(),u.hide()};this.width=function(a,c){var d=l;a&&(l=a,void 0==c||c?b.animate({width:a,left:Math.floor(a/2)},"slow"):
b.css("width",a));return d};this.height=function(a,c){var d=p;a&&(p=a,void 0==c||c?b.animate({height:a,top:Math.floor(a/2)},"slow"):b.css("height",a));return d};return this}var v=function(){for(var a=3,d=document.createElement("div"),n=d.getElementsByTagName("i");d.innerHTML="\x3c!--[if gt IE "+ ++a+"]><i></i><![endif]--\x3e",n[0];);return 4<a?a:null};d.fn.speedoPopup=function(a){a.href&&null==a.useFrame&&(a.useFrame=!0);if("random"==a.css3Effects){var m="none zoomIn zoomOut flip flipInHor flipInVer bounceIn pageTop flyIn fadeInScale scaleDown fadeSpin pulse leftSpeedIn rollIn rollOut pulseBody fadeSpinBody".split(" ");
a.css3Effects=m[Math.floor(Math.random()*(m.length-1))]}a=d.extend(!0,{width:null,height:null,left:"center",top:"center",close:!0,closeCaption:"",theme:"default",htmlContent:"<p> Default content </p>",esc:!0,overlay:{opacity:0.75,zindex:1E5},caption:null,href:null,overlayClose:!0,autoClose:!1,autoShow:!1,effectIn:"none",effectOut:"none",css3Effects:!1,showOnEvent:"click",useFrame:!1,useAjax:!1,loadingImage:!1,unload:!1,draggable:!1,responsive:!0,ajaxContent:{url:"",type:"POST",data:null},groupGallery:!1,
groupIndex:0,groupAutoPlay:!0,groupWait:5E3,loop:!0,buttons:null,onBeforeShow:function(){},onShow:function(){},onComplete:function(){},onHide:function(){},onClose:function(){}},a);var n=null;!this.data("unique-speedo-instance")||a.unload?(n=new I(a),a.autoShow?setTimeout(function(){n.createPopup()},a.autoShow):n.createPopup(),n.init(),this.data("unique-speedo-instance",n)):(n=this.data("unique-speedo-instance"),a.autoShow?setTimeout(function(){n.showPopup()},a.autoShow):(n.showPopup(),n.centerPopup(),
a.groupAutoPlay&&n.playContent(!0)));return n};d(function(){d.speedoPopup={};d.speedoPopup.smartSkins={};d.speedoPopup.browser_ie=v;d.speedoPopup.registerSmartSkin=function(a,m){d.speedoPopup.smartSkins[a]=m};d(document).on("click",".speedo-popup",function(a){a.preventDefault();var m=d(this);a=m.attr("href");var n=[],k=m.attr("rel"),v=0;k&&""!=k&&d('.speedo-popup[rel="'+k+'"]').each(function(a){var g=d(this);g.get(0)==m.get(0)&&(v=a);n.push({url:g.attr("href"),title:g.attr("title")})});for(var k=
a.split("+").join(" "),k=k.split("?")[1],D={},G=/[?&]?([^=]+)=([^&]*)/g,g;g=G.exec(k);)D[decodeURIComponent(g[1])]=decodeURIComponent(g[2]);k=d.extend({htmlContent:!1,effectIn:"fade",effectOut:"fade"},D);k.useAjax&&(k.ajaxContent={url:a,type:"GET",data:null});0<n.length&&(k.groupGallery=n,k.groupIndex=v);k.href=a;d(this).speedoPopup(k)})})})(jQuery);